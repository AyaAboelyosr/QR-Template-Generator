{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/qrtemplategenerator/services/template.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"addSectionModal\"];\nconst _c1 = [\"addFieldModal\"];\nfunction TemplateDetailsComponent_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 0);\n    i0.ɵɵelement(1, \"div\", 1);\n    i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 5);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const field_r2 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(field_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r2.type);\n  }\n}\nfunction TemplateDetailsComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtemplate(1, TemplateDetailsComponent_div_15_div_1_Template, 8, 2, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.section.fields);\n  }\n}\nexport class TemplateDetailsComponent {\n  constructor(fb, templateService) {\n    this.fb = fb;\n    this.templateService = templateService;\n    this.template = {\n      id: 0,\n      title: '',\n      uniqeCode: '',\n      sections: []\n    };\n    this.sectionUpdated = new EventEmitter();\n    this.selectedTemplateId = null;\n    this.selectedSectionId = null;\n    this.templateList = [];\n    this.initSectionForm();\n    this.initFieldForm();\n  }\n  ngOnInit() {\n    this.initSectionForm();\n    this.initFieldForm();\n  }\n  ngOnChanges(changes) {\n    if (changes['template']) {\n      console.log('Template received in child component:', this.template);\n    }\n  }\n  initSectionForm() {\n    this.sectionParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required]\n    });\n  }\n  initFieldForm() {\n    this.fieldParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required],\n      isRequired: [false]\n    });\n  }\n  // Section methods\n  editSection(templateId, section = null) {\n    this.selectedTemplateId = templateId;\n    this.addSectionModal.open();\n    this.initSectionForm();\n    if (section) {\n      this.sectionParams.setValue({\n        id: section.id,\n        title: section.title,\n        type: section.type\n      });\n    }\n  }\n  saveSection() {\n    if (this.sectionParams.invalid) {\n      this.showMessage('Please fill all required fields.', 'error');\n      return;\n    }\n    const section = this.sectionParams.value;\n    const templateId = this.selectedTemplateId;\n    if (templateId !== null) {\n      const addSectionDTO = {\n        title: section.title,\n        type: this.mapSectionType(section.type)\n      };\n      if (section.id) {\n        this.templateService.updateSection(templateId.toString(), section.id.toString(), addSectionDTO).subscribe(() => {\n          const template = this.templateList.find(t => t.id === templateId);\n          if (template && template.sections) {\n            const existingSection = template.sections.find(s => s.id === section.id);\n            if (existingSection) {\n              Object.assign(existingSection, section);\n            }\n          }\n          this.showMessage('Section has been updated successfully.');\n          this.addSectionModal.close();\n        }, error => this.handleErrorResponse(error));\n      } else {\n        this.templateService.addSection(templateId.toString(), addSectionDTO).subscribe(newSection => {\n          const template = this.templateList.find(t => t.id === templateId);\n          if (template) {\n            if (!template.sections) {\n              template.sections = [];\n            }\n            template.sections.push(newSection);\n          }\n          this.showMessage('Section has been added successfully.');\n          this.addSectionModal.close();\n        }, error => this.handleErrorResponse(error));\n      }\n    }\n  }\n  mapSectionType(type) {\n    const sectionTypeMap = {\n      'Form': 0,\n      'Table': 1\n    };\n    return sectionTypeMap[type] ?? 0;\n  }\n  handleErrorResponse(error) {\n    console.error('Error response:', error);\n    this.showMessage(error.error?.message || 'An unknown error occurred!', 'error');\n  }\n  showMessage(msg, type = 'success') {\n    Swal.fire({\n      icon: type,\n      title: msg,\n      toast: true,\n      position: 'top',\n      showConfirmButton: false,\n      timer: 3000,\n      customClass: {\n        container: 'toast'\n      }\n    });\n  }\n  deleteSection(templateId, sectionId) {\n    this.templateService.deleteSection(templateId.toString(), sectionId.toString()).subscribe(() => {\n      const template = this.templateList.find(t => t.id === templateId);\n      if (template && template.sections) {\n        template.sections = template.sections.filter(s => s.id !== sectionId);\n      }\n      this.showMessage('Section has been deleted successfully.');\n    }, error => {\n      this.showMessage(error, 'error');\n    });\n  }\n  loadSections(templateId) {\n    this.templateService.getTemplateById(templateId.toString()).subscribe(template => {\n      const existingTemplate = this.templateList.find(t => t.id === templateId);\n      if (existingTemplate) {\n        existingTemplate.sections = template.sections;\n      }\n    });\n  }\n  getTemplateIdBySectionId(sectionId) {\n    for (const template of this.templateList) {\n      if (template.sections) {\n        for (const section of template.sections) {\n          if (section.id === sectionId) {\n            return template.id;\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n  // Field methods\n  editField(section, field = null) {\n    this.selectedSectionId = section.id;\n    const templateId = this.getTemplateIdBySectionId(section.id);\n    this.selectedTemplateId = templateId !== undefined ? templateId : null;\n    this.addFieldModal.open();\n    this.initFieldForm();\n    if (field) {\n      this.fieldParams.setValue({\n        id: field.id,\n        title: field.title,\n        type: field.type,\n        isRequired: field.isRequired\n      });\n    }\n  }\n  saveField() {\n    if (this.fieldParams.invalid) {\n      this.showMessage('Please fill all required fields.', 'error');\n      return;\n    }\n    const field = this.fieldParams.value;\n    const sectionId = this.selectedSectionId;\n    const templateId = this.selectedTemplateId;\n    if (templateId != null && sectionId != null) {\n      const addFieldDTO = {\n        title: field.title,\n        type: this.mapFieldType(field.type),\n        isRequired: field.isRequired\n      };\n      if (field.id != null && field.id !== 0) {\n        // In saveField() update case\n        this.templateService.updateField(templateId.toString(), sectionId.toString(), field.id.toString(), addFieldDTO).subscribe(updatedField => {\n          const template = this.templateList.find(t => t.id === templateId);\n          const section = template?.sections?.find(s => s.id === sectionId);\n          if (section?.fields) {\n            const index = section.fields.findIndex(f => f.id === updatedField.id);\n            if (index > -1) {\n              section.fields = [...section.fields.slice(0, index), updatedField, ...section.fields.slice(index + 1)];\n            }\n          }\n          this.showMessage('Field updated successfully');\n          this.addFieldModal.close();\n        }, error => this.handleErrorResponse(error));\n      } else {\n        // In saveField() add case\n        this.templateService.addField(templateId.toString(), sectionId.toString(), addFieldDTO).subscribe(newField => {\n          const template = this.templateList.find(t => t.id === templateId);\n          const section = template?.sections?.find(s => s.id === sectionId);\n          if (section) {\n            if (!section.fields) section.fields = [];\n            section.fields = [...section.fields, newField]; // Immutable update\n          }\n\n          this.showMessage('Field added successfully');\n          this.addFieldModal.close();\n        }, error => this.handleErrorResponse(error));\n      }\n    } else {\n      this.showMessage('Template ID or Section ID is missing.', 'error');\n    }\n  }\n  mapFieldType(type) {\n    const fieldTypeMap = {\n      'Text': 0,\n      'Number': 1,\n      'Date': 2,\n      'Boolean': 3\n    };\n    return fieldTypeMap[type];\n  }\n  deleteField(section, fieldId) {\n    const templateId = this.getTemplateIdBySectionId(section.id);\n    if (templateId !== undefined) {\n      this.templateService.deleteField(templateId.toString(), section.id.toString(), fieldId.toString()).subscribe(() => {\n        const sectionToUpdate = this.templateList.find(t => t.id === templateId)?.sections?.find(s => s.id === section.id);\n        if (sectionToUpdate) {\n          sectionToUpdate.fields = sectionToUpdate.fields?.filter(f => f.id !== fieldId);\n        }\n        this.showMessage('Field has been deleted successfully.');\n      }, error => {\n        this.showMessage(error, 'error');\n      });\n    }\n  }\n  toggleFieldsVisibility(section) {\n    section.expanded = !section.expanded;\n  }\n  mapSectionType(type) {\n    const sectionTypeMap = {\n      'Form': 0,\n      'Table': 1\n    };\n    return sectionTypeMap[type] ?? 0;\n  }\n  static #_ = this.ɵfac = function TemplateDetailsComponent_Factory(t) {\n    return new (t || TemplateDetailsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.TemplateService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TemplateDetailsComponent,\n    selectors: [[\"app-template-details\"]],\n    viewQuery: function TemplateDetailsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.addSectionModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.addFieldModal = _t.first);\n      }\n    },\n    inputs: {\n      template: \"template\"\n    },\n    outputs: {\n      sectionUpdated: \"sectionUpdated\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 16,\n    vars: 4,\n    consts: [[1, \"relative\", \"overflow-hidden\", \"rounded-md\", \"bg-white\", \"text-center\", \"shadow\", \"dark:bg-[#1c232f]\"], [1, \"rounded-t-md\", \"bg-white/40\", \"bg-[url('/assets/images/notification-bg.png')]\", \"bg-cover\", \"bg-center\", \"p-6\", \"pb-0\"], [1, \"relative\", \"-mt-10\", \"px-6\", \"pb-24\"], [1, \"rounded-md\", \"bg-white\", \"px-2\", \"py-4\", \"shadow-md\", \"dark:bg-gray-900\"], [1, \"text-xl\"], [1, \"text-white-dark\"], [1, \"absolute\", \"bottom-0\", \"mt-6\", \"flex\", \"w-full\", \"gap-4\", \"p-6\", \"ltr:left-0\", \"rtl:right-0\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"w-1/2\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\", \"w-1/2\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"w-1/2\", 3, \"click\"], [\"class\", \"field-list\", 4, \"ngIf\"], [1, \"field-list\"], [\"class\", \"relative overflow-hidden rounded-md bg-white text-center shadow dark:bg-[#1c232f]\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-lg\"]],\n    template: function TemplateDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_Template_button_click_9_listener() {\n          return ctx.editSection(ctx.template.id, ctx.section);\n        });\n        i0.ɵɵtext(10, \"Edit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_Template_button_click_11_listener() {\n          return ctx.deleteSection(ctx.template.id, ctx.section.id);\n        });\n        i0.ɵɵtext(12, \"Delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_Template_button_click_13_listener() {\n          return ctx.toggleFields(ctx.section);\n        });\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(15, TemplateDetailsComponent_div_15_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.section.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.section.type);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.section.expanded ? \"Hide Fields\" : \"View Fields\", \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.section.expanded);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["EventEmitter","Validators","Swal","i0","TemplateDetailsComponent","constructor","fb","templateService","id","title","uniqeCode","sections","initSectionForm","initFieldForm","ngOnInit","ngOnChanges","changes","console","log","template","sectionParams","group","required","minLength","maxLength","type","fieldParams","isRequired","editSection","templateId","section","selectedTemplateId","addSectionModal","open","setValue","saveSection","invalid","showMessage","value","addSectionDTO","mapSectionType","updateSection","toString","subscribe","templateList","find","t","existingSection","s","Object","assign","close","error","handleErrorResponse","addSection","newSection","push","sectionTypeMap","message","msg","fire","icon","toast","position","showConfirmButton","timer","customClass","container","deleteSection","sectionId","filter","loadSections","getTemplateById","existingTemplate","getTemplateIdBySectionId","undefined","editField","field","selectedSectionId","addFieldModal","saveField","addFieldDTO","mapFieldType","updateField","updatedField","fields","index","findIndex","f","slice","addField","newField","fieldTypeMap","deleteField","fieldId","sectionToUpdate","toggleFieldsVisibility","expanded","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\qrtemplategenerator\\components\\template-details\\template-details.component.ts","C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\qrtemplategenerator\\components\\template-details\\template-details.component.html"],"sourcesContent":["import { Component, Input, Output, ViewChild, EventEmitter, SimpleChanges } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ModalComponent } from 'angular-custom-modal';\nimport Swal from 'sweetalert2';\nimport { TemplateService } from 'src/app/qrtemplategenerator/services/template.service';\nimport { Template } from 'src/app/qrtemplategenerator/Models/Template';\nimport { Section } from 'src/app/qrtemplategenerator/Models/Section';\nimport { Field } from 'src/app/qrtemplategenerator/Models/Field';\n\n@Component({\n  selector: 'app-template-details',\n  templateUrl: './template-details.component.html'\n})\nexport class TemplateDetailsComponent {\n  @Input() template: Template = {\n    id: 0,\n    title: '',\n    uniqeCode: '',\n    sections: []\n  };\n\n  @Output() sectionUpdated = new EventEmitter<void>();\n  @ViewChild('addSectionModal') addSectionModal!: ModalComponent;\n  @ViewChild('addFieldModal') addFieldModal!: ModalComponent;\n\n  sectionParams!: FormGroup;\n  fieldParams!: FormGroup;\n  selectedSection?: Section;\n\n  selectedTemplateId: number | null = null;\n  selectedSectionId: number | null = null;\n  templateList: Template[] = [];\n\n  constructor(private fb: FormBuilder, private templateService: TemplateService) {\n    this.initSectionForm();\n    this.initFieldForm();\n  }\n\n  ngOnInit() {\n    this.initSectionForm();\n    this.initFieldForm();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['template']) {\n      console.log('Template received in child component:', this.template);\n    }\n  }\n\n  initSectionForm() {\n    this.sectionParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required],\n    });\n  }\n\n  initFieldForm() {\n    this.fieldParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required],\n      isRequired: [false],\n    });\n  }\n\n  // Section methods\n  editSection(templateId: number, section: Section | null = null) {\n    this.selectedTemplateId = templateId;\n    this.addSectionModal.open();\n    this.initSectionForm();\n    if (section) {\n      this.sectionParams.setValue({\n        id: section.id,\n        title: section.title,\n        type: section.type,\n      });\n    }\n  }\n\n  saveSection() {\n    if (this.sectionParams.invalid) {\n      this.showMessage('Please fill all required fields.', 'error');\n      return;\n    }\n\n    const section: Section = this.sectionParams.value;\n    const templateId = this.selectedTemplateId;\n\n    if (templateId !== null) {\n      const addSectionDTO = {\n        title: section.title,\n        type: this.mapSectionType(section.type)\n      };\n\n      if (section.id) {\n        this.templateService.updateSection(templateId.toString(), section.id.toString(), addSectionDTO)\n          .subscribe(\n            () => {\n              const template = this.templateList.find(t => t.id === templateId);\n              if (template && template.sections) {\n                const existingSection = template.sections.find(s => s.id === section.id);\n                if (existingSection) {\n                  Object.assign(existingSection, section);\n                }\n              }\n              this.showMessage('Section has been updated successfully.');\n              this.addSectionModal.close();\n            },\n            (error) => this.handleErrorResponse(error)\n          );\n      } else {\n        this.templateService.addSection(templateId.toString(), addSectionDTO)\n          .subscribe(\n            (newSection) => {\n              const template = this.templateList.find(t => t.id === templateId);\n              if (template) {\n                if (!template.sections) {\n                  template.sections = [];\n                }\n                template.sections.push(newSection);\n              }\n              this.showMessage('Section has been added successfully.');\n              this.addSectionModal.close();\n            },\n            (error) => this.handleErrorResponse(error)\n          );\n      }\n    }\n  }\n\n  private mapSectionType(type: any): number {\n    const sectionTypeMap: { [key: string]: number } = {\n      'Form': 0,\n      'Table': 1,\n    };\n    return sectionTypeMap[type] ?? 0;\n  }\n\n  private handleErrorResponse(error: any) {\n    console.error('Error response:', error);\n    this.showMessage(error.error?.message || 'An unknown error occurred!', 'error');\n  }\n\n  showMessage(msg: string, type: 'success' | 'error' = 'success') {\n    Swal.fire({\n      icon: type,\n      title: msg,\n      toast: true,\n      position: 'top',\n      showConfirmButton: false,\n      timer: 3000,\n      customClass: { container: 'toast' },\n    });\n  }\n\n  deleteSection(templateId: number, sectionId: number) {\n    this.templateService.deleteSection(templateId.toString(), sectionId.toString()).subscribe(() => {\n      const template = this.templateList.find(t => t.id === templateId);\n      if (template && template.sections) {\n        template.sections = template.sections.filter(s => s.id !== sectionId);\n      }\n      this.showMessage('Section has been deleted successfully.');\n    }, error => {\n      this.showMessage(error, 'error');\n    });\n  }\n\n  loadSections(templateId: number) {\n    this.templateService.getTemplateById(templateId.toString()).subscribe((template) => {\n      const existingTemplate = this.templateList.find(t => t.id === templateId);\n      if (existingTemplate) {\n        existingTemplate.sections = template.sections;\n      }\n    });\n  }\n\n  getTemplateIdBySectionId(sectionId: number): number | undefined {\n    for (const template of this.templateList) {\n      if (template.sections) {\n        for (const section of template.sections) {\n          if (section.id === sectionId) {\n            return template.id;\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  // Field methods\n  editField(section: Section, field: Field | null = null) {\n    this.selectedSectionId = section.id;\n    const templateId = this.getTemplateIdBySectionId(section.id);\n    this.selectedTemplateId = templateId !== undefined ? templateId : null;\n    this.addFieldModal.open();\n    this.initFieldForm();\n    if (field) {\n      this.fieldParams.setValue({\n        id: field.id,\n        title: field.title,\n        type: field.type,\n        isRequired: field.isRequired,\n      });\n    }\n  }\n\n  saveField() {\n    if (this.fieldParams.invalid) {\n      this.showMessage('Please fill all required fields.', 'error');\n      return;\n    }\n\n    const field: Field = this.fieldParams.value;\n    const sectionId = this.selectedSectionId;\n    const templateId = this.selectedTemplateId;\n\n    if (templateId != null && sectionId != null) {\n      const addFieldDTO = {\n        title: field.title,\n        type: this.mapFieldType(field.type), // Convert type correctly\n        isRequired: field.isRequired,\n      };\n\n      if (field.id != null && field.id !== 0) {\n        // In saveField() update case\n        this.templateService.updateField(templateId.toString(), sectionId.toString(), field.id.toString(), addFieldDTO)\n          .subscribe(\n            (updatedField) => {\n              const template = this.templateList.find(t => t.id === templateId);\n              const section = template?.sections?.find(s => s.id === sectionId);\n\n              if (section?.fields) {\n                const index = section.fields.findIndex(f => f.id === updatedField.id);\n                if (index > -1) {\n                  section.fields = [\n                    ...section.fields.slice(0, index),\n                    updatedField,\n                    ...section.fields.slice(index + 1)\n                  ];\n                }\n              }\n\n              this.showMessage('Field updated successfully');\n              this.addFieldModal.close();\n            },\n            (error) => this.handleErrorResponse(error)\n          );\n      } else {\n        // In saveField() add case\n        this.templateService.addField(templateId.toString(), sectionId.toString(), addFieldDTO)\n          .subscribe(\n            (newField) => {\n              const template = this.templateList.find(t => t.id === templateId);\n              const section = template?.sections?.find(s => s.id === sectionId);\n\n              if (section) {\n                if (!section.fields) section.fields = [];\n                section.fields = [...section.fields, newField]; // Immutable update\n              }\n\n              this.showMessage('Field added successfully');\n              this.addFieldModal.close();\n            },\n            (error) => this.handleErrorResponse(error)\n          );\n      }\n    } else {\n      this.showMessage('Template ID or Section ID is missing.', 'error');\n    }\n  }\n\n  private mapFieldType(type: any): number {\n    const fieldTypeMap: { [key: string]: number } = {\n      'Text': 0,\n      'Number': 1,\n      'Date': 2,\n      'Boolean': 3,\n    };\n    return fieldTypeMap[type];\n  }\n\n  deleteField(section: Section, fieldId: number) {\n    const templateId = this.getTemplateIdBySectionId(section.id);\n\n    if (templateId !== undefined) {\n      this.templateService.deleteField(templateId.toString(), section.id.toString(), fieldId.toString()).subscribe(() => {\n        const sectionToUpdate = this.templateList\n          .find(t => t.id === templateId)\n          ?.sections?.find(s => s.id === section.id);\n\n        if (sectionToUpdate) {\n          sectionToUpdate.fields = sectionToUpdate.fields?.filter(f => f.id !== fieldId);\n        }\n        this.showMessage('Field has been deleted successfully.');\n      }, (error) => {\n        this.showMessage(error, 'error');\n      });\n    }\n  }\n\n  toggleFieldsVisibility(section: Section) {\n    section.expanded = !section.expanded;\n  }\n\n  mapSectionType(type: any): number {\n    const sectionTypeMap = {\n      'Form': 0,\n      'Table': 1,\n    };\n    return sectionTypeMap[type] ?? 0;\n  }\n}\n","<div class=\"relative overflow-hidden rounded-md bg-white text-center shadow dark:bg-[#1c232f]\">\n  <div class=\"rounded-t-md bg-white/40 bg-[url('/assets/images/notification-bg.png')] bg-cover bg-center p-6 pb-0\">\n      <!-- Optional: Add an image/placeholder if needed -->\n  </div>\n  <div class=\"relative -mt-10 px-6 pb-24\">\n      <div class=\"rounded-md bg-white px-2 py-4 shadow-md dark:bg-gray-900\">\n          <div class=\"text-xl\">{{ section.title }}</div>\n          <div class=\"text-white-dark\">{{ section.type }}</div>\n      </div>\n\n      <!-- Actions for Section -->\n      <div class=\"absolute bottom-0 mt-6 flex w-full gap-4 p-6 ltr:left-0 rtl:right-0\">\n          <button type=\"button\" class=\"btn btn-outline-primary w-1/2\" (click)=\"editSection(template.id, section)\">Edit</button>\n          <button type=\"button\" class=\"btn btn-outline-danger w-1/2\" (click)=\"deleteSection(template.id, section.id)\">Delete</button>\n          <button type=\"button\" class=\"btn btn-outline-secondary w-1/2\" (click)=\"toggleFields(section)\">\n              {{ section.expanded ? 'Hide Fields' : 'View Fields' }}\n          </button>\n      </div>\n\n      <!-- Field List (Visibility Toggle) -->\n      <div *ngIf=\"section.expanded\" class=\"field-list\">\n          <div *ngFor=\"let field of section.fields\" class=\"relative overflow-hidden rounded-md bg-white text-center shadow dark:bg-[#1c232f]\">\n              <div class=\"rounded-t-md bg-white/40 bg-[url('/assets/images/notification-bg.png')] bg-cover bg-center p-6 pb-0\">\n                  <!-- Optional: Add an image/placeholder if needed -->\n              </div>\n              <div class=\"relative -mt-10 px-6 pb-24\">\n                  <div class=\"rounded-md bg-white px-2 py-4 shadow-md dark:bg-gray-900\">\n                      <div class=\"text-lg\">{{ field.title }}</div>\n                      <div class=\"text-white-dark\">{{ field.type }}</div>\n                  </div>\n              </div>\n          </div>\n      </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}