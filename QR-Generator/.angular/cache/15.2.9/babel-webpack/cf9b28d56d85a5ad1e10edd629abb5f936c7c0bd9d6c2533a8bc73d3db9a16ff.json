{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/qrtemplategenerator/services/template.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"addSectionModal\"];\nconst _c1 = [\"addFieldModal\"];\nconst _c2 = function (a0) {\n  return {\n    $implicit: a0\n  };\n};\nfunction TemplateDetailsComponent_ng_template_0_ng_container_11_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 8);\n    i0.ɵɵelementContainer(2, 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const section_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵnextContext(2);\n    const _r2 = i0.ɵɵreference(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c2, section_r7.fields));\n  }\n}\nfunction TemplateDetailsComponent_ng_template_0_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\")(7, \"div\", 10)(8, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_ng_container_11_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const section_r7 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.editSection(section_r7));\n    });\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_ng_container_11_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const section_r7 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.deleteSection(section_r7));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_ng_container_11_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const section_r7 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.toggleFields(section_r7));\n    });\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(14, TemplateDetailsComponent_ng_template_0_ng_container_11_tr_14_Template, 3, 4, \"tr\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const section_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(section_r7.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(section_r7.type);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", section_r7.expanded ? \"Hide Fields\" : \"View Fields\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r7.expanded);\n  }\n}\nfunction TemplateDetailsComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"table\", 5)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Section Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 6);\n    i0.ɵɵtext(9, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"tbody\");\n    i0.ɵɵtemplate(11, TemplateDetailsComponent_ng_template_0_ng_container_11_Template, 15, 4, \"ng-container\", 7);\n    i0.ɵɵelementStart(12, \"tr\")(13, \"td\", 8)(14, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.addSection());\n    });\n    i0.ɵɵtext(15, \"Add Section\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const sections_r5 = ctx.sections;\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", sections_r5);\n  }\n}\nfunction TemplateDetailsComponent_ng_template_2_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"div\", 10)(10, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_2_ng_container_13_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const field_r18 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.editField(field_r18));\n    });\n    i0.ɵɵtext(11, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_2_ng_container_13_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const field_r18 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.deleteField(field_r18));\n    });\n    i0.ɵɵtext(13, \"Delete\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const field_r18 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(field_r18.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r18.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r18.isRequired ? \"Yes\" : \"No\");\n  }\n}\nfunction TemplateDetailsComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"table\", 5)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Field Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 6);\n    i0.ɵɵtext(11, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, TemplateDetailsComponent_ng_template_2_ng_container_13_Template, 14, 3, \"ng-container\", 7);\n    i0.ɵɵelementStart(14, \"tr\")(15, \"td\", 15)(16, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_2_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.addField());\n    });\n    i0.ɵɵtext(17, \"Add Field\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const fields_r16 = ctx.fields;\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", fields_r16);\n  }\n}\nconst _c3 = function (a0) {\n  return {\n    sections: a0\n  };\n};\nfunction TemplateDetailsComponent_ng_container_5_ng_container_4_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 15);\n    i0.ɵɵelementContainer(2, 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const template_r25 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵnextContext(2);\n    const _r0 = i0.ɵɵreference(1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r0)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c3, template_r25.sections));\n  }\n}\nfunction TemplateDetailsComponent_ng_container_5_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"tr\");\n    i0.ɵɵtemplate(2, TemplateDetailsComponent_ng_container_5_ng_container_4_tr_2_Template, 3, 4, \"tr\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const template_r25 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", template_r25.expanded);\n  }\n}\nfunction TemplateDetailsComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"table\", 5)(3, \"tbody\");\n    i0.ɵɵtemplate(4, TemplateDetailsComponent_ng_container_5_ng_container_4_Template, 3, 1, \"ng-container\", 7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.filteredTemplateList);\n  }\n}\nexport class TemplateDetailsComponent {\n  constructor(fb, templateService) {\n    this.fb = fb;\n    this.templateService = templateService;\n    this.initSectionForm();\n    this.initFieldForm();\n  }\n  initSectionForm() {\n    this.sectionParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required]\n    });\n  }\n  initFieldForm() {\n    this.fieldParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required],\n      isRequired: [false]\n    });\n  }\n  // Section methods\n  editSection(section) {\n    this.sectionParams.reset({\n      id: 0\n    });\n    if (section) {\n      this.sectionParams.patchValue(section);\n    }\n    this.addSectionModal.open();\n  }\n  saveSection() {\n    if (this.sectionParams.invalid) {\n      this.showMessage('Please fill all required fields.', 'error');\n      return;\n    }\n    const section = this.sectionParams.value;\n    const templateId = this.selectedTemplateId;\n    if (templateId !== null) {\n      const addSectionDTO = {\n        title: section.title,\n        type: this.mapSectionType(section.type)\n      };\n      if (section.id) {\n        this.templateService.updateSection(templateId.toString(), section.id.toString(), addSectionDTO).subscribe(() => {\n          const template = this.templateList.find(t => t.id === templateId);\n          if (template && template.sections) {\n            const existingSection = template.sections.find(s => s.id === section.id);\n            if (existingSection) {\n              Object.assign(existingSection, section);\n            }\n          }\n          this.showMessage('Section has been updated successfully.');\n          this.addSectionModal.close();\n        }, error => this.handleErrorResponse(error));\n      } else {\n        this.templateService.addSection(templateId.toString(), addSectionDTO).subscribe(newSection => {\n          const template = this.templateList.find(t => t.id === templateId);\n          if (template) {\n            if (!template.sections) {\n              template.sections = [];\n            }\n            template.sections.push(newSection);\n          }\n          this.showMessage('Section has been added successfully.');\n          this.addSectionModal.close();\n        }, error => this.handleErrorResponse(error));\n      }\n    }\n  }\n  mapSectionType(type) {\n    const sectionTypeMap = {\n      'Form': 0,\n      'Table': 1\n    };\n    return sectionTypeMap[type] ?? 0;\n  }\n  handleErrorResponse(error) {\n    console.error('Error response:', error);\n    console.error('Error details:', JSON.stringify(error.error));\n    this.showMessage(error.error?.message || 'An unknown error occurred!', 'error');\n  }\n  showMessage(msg, type = 'success') {\n    Swal.fire({\n      icon: type,\n      title: msg,\n      toast: true,\n      position: 'top',\n      showConfirmButton: false,\n      timer: 3000,\n      customClass: {\n        container: 'toast'\n      }\n    });\n  }\n  deleteSection(sectionId) {\n    this.templateService.deleteSection(this.template.id.toString(), sectionId.toString()).subscribe(() => {\n      this.template.sections = this.template.sections?.filter(s => s.id !== sectionId);\n    });\n  }\n  // Field methods\n  editField(section, field) {\n    this.selectedSection = section;\n    this.fieldParams.reset({\n      id: 0\n    });\n    if (field) {\n      this.fieldParams.patchValue(field);\n    }\n    this.addFieldModal.open();\n  }\n  saveField() {\n    if (this.fieldParams.invalid || !this.selectedSection) return;\n    const field = this.fieldParams.value;\n    const sectionId = this.selectedSection.id;\n    if (field.id) {\n      this.templateService.updateField(this.template.id.toString(), sectionId.toString(), field.id.toString(), field).subscribe(updated => this.updateFieldInList(updated));\n    } else {\n      this.templateService.addField(this.template.id.toString(), sectionId.toString(), field).subscribe(newField => this.selectedSection?.fields?.push(newField));\n    }\n    this.addFieldModal.close();\n  }\n  deleteField(section, fieldId) {\n    this.templateService.deleteField(this.template.id.toString(), section.id.toString(), fieldId.toString()).subscribe(() => {\n      section.fields = section.fields?.filter(f => f.id !== fieldId);\n    });\n  }\n  updateSectionInList(updated) {\n    const index = this.template.sections?.findIndex(s => s.id === updated.id) ?? -1;\n    if (index > -1) this.template.sections[index] = updated;\n  }\n  updateFieldInList(updated) {\n    const index = this.selectedSection?.fields?.findIndex(f => f.id === updated.id) ?? -1;\n    if (index > -1) this.selectedSection.fields[index] = updated;\n  }\n  toggleFields(section) {\n    section.expanded = !section.expanded;\n    if (!section.fields) {\n      this.templateService.getSectionFields(this.template.id.toString(), section.id.toString()).subscribe(fields => section.fields = fields);\n    }\n  }\n  static #_ = this.ɵfac = function TemplateDetailsComponent_Factory(t) {\n    return new (t || TemplateDetailsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.TemplateService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TemplateDetailsComponent,\n    selectors: [[\"app-template-details\"]],\n    viewQuery: function TemplateDetailsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.addSectionModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.addFieldModal = _t.first);\n      }\n    },\n    inputs: {\n      template: \"template\"\n    },\n    decls: 6,\n    vars: 1,\n    consts: [[\"sectionTemplate\", \"\"], [\"fieldTemplate\", \"\"], [1, \"panel\", \"mt-5\", \"overflow-hidden\", \"border-0\", \"p-0\"], [4, \"ngIf\"], [1, \"table-responsive\"], [1, \"table-striped\", \"table-hover\"], [1, \"!text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"3\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-success\", 3, \"click\"], [1, \"flex\", \"items-center\", \"justify-center\", \"gap-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", 3, \"click\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"colspan\", \"4\"]],\n    template: function TemplateDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TemplateDetailsComponent_ng_template_0_Template, 16, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(2, TemplateDetailsComponent_ng_template_2_Template, 18, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵtemplate(5, TemplateDetailsComponent_ng_container_5_Template, 5, 1, \"ng-container\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayType === \"list\");\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["Validators","Swal","i0","TemplateDetailsComponent","constructor","fb","templateService","initSectionForm","initFieldForm","sectionParams","group","id","title","required","minLength","maxLength","type","fieldParams","isRequired","editSection","section","reset","patchValue","addSectionModal","open","saveSection","invalid","showMessage","value","templateId","selectedTemplateId","addSectionDTO","mapSectionType","updateSection","toString","subscribe","template","templateList","find","t","sections","existingSection","s","Object","assign","close","error","handleErrorResponse","addSection","newSection","push","sectionTypeMap","console","JSON","stringify","message","msg","fire","icon","toast","position","showConfirmButton","timer","customClass","container","deleteSection","sectionId","filter","editField","field","selectedSection","addFieldModal","saveField","updateField","updated","updateFieldInList","addField","newField","fields","deleteField","fieldId","f","updateSectionInList","index","findIndex","toggleFields","expanded","getSectionFields","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\qrtemplategenerator\\components\\template-details\\template-details.component.ts","C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\qrtemplategenerator\\components\\template-details\\template-details.component.html"],"sourcesContent":["import { Component, Input, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ModalComponent } from 'angular-custom-modal';\nimport Swal from 'sweetalert2';\nimport { TemplateService } from 'src/app/qrtemplategenerator/services/template.service';\nimport { Template } from 'src/app/qrtemplategenerator/Models/Template';\nimport { Section } from 'src/app/qrtemplategenerator/Models/Section';\nimport { Field } from 'src/app/qrtemplategenerator/Models/Field';\n\n@Component({\n  selector: 'app-template-details',\n  templateUrl: './template-details.component.html'\n})\nexport class TemplateDetailsComponent {\n  @Input() template!: Template;\n  @ViewChild('addSectionModal') addSectionModal!: ModalComponent;\n  @ViewChild('addFieldModal') addFieldModal!: ModalComponent;\n\n  sectionParams!: FormGroup;\n  fieldParams!: FormGroup;\n  selectedSection?: Section;\n\n\n  \n\n  \n\n  constructor(private fb: FormBuilder, private templateService: TemplateService) {\n    this.initSectionForm();\n    this.initFieldForm();\n  }\n\n  initSectionForm() {\n    this.sectionParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required],\n    });\n  }\n\n  initFieldForm() {\n    this.fieldParams = this.fb.group({\n      id: [0],\n      title: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(100)]],\n      type: ['', Validators.required],\n      isRequired: [false],\n    });\n  }\n\n  // Section methods\n  editSection(section?: Section) {\n    this.sectionParams.reset({ id: 0 });\n    if (section) {\n      this.sectionParams.patchValue(section);\n    }\n    this.addSectionModal.open();\n  }\n\n  saveSection() {\n    if (this.sectionParams.invalid) {\n      this.showMessage('Please fill all required fields.', 'error');\n      return;\n    }\n  \n    const section: Section = this.sectionParams.value;\n    const templateId = this.selectedTemplateId;\n  \n    \n  \n    if (templateId !== null) {\n      const addSectionDTO = {\n        title: section.title,\n        type: this.mapSectionType(section.type) \n      };\n  \n   \n  \n      if (section.id) {\n       \n        this.templateService.updateSection(templateId.toString(), section.id.toString(), addSectionDTO)\n          .subscribe(\n            () => {\n              const template = this.templateList.find(t => t.id === templateId);\n              if (template && template.sections) {\n                const existingSection = template.sections.find(s => s.id === section.id);\n                if (existingSection) {\n                  Object.assign(existingSection, section);\n                }\n              }\n              this.showMessage('Section has been updated successfully.');\n              this.addSectionModal.close();\n            },\n            (error) => this.handleErrorResponse(error)\n          );\n      } else {\n       \n        this.templateService.addSection(templateId.toString(), addSectionDTO)\n          .subscribe(\n            (newSection) => {\n              const template = this.templateList.find(t => t.id === templateId);\n              if (template) {\n                if (!template.sections) {\n                  template.sections = [];\n                }\n                template.sections.push(newSection);\n              }\n              this.showMessage('Section has been added successfully.');\n              this.addSectionModal.close();\n            },\n            (error) => this.handleErrorResponse(error)\n          );\n      }\n    }\n  }\n  \n \n  private mapSectionType(type: any): number {\n    const sectionTypeMap: { [key: string]: number } = {\n      'Form': 0,\n      'Table': 1,\n    };\n    return sectionTypeMap[type] ?? 0; \n  }\n  private handleErrorResponse(error: any) {\n    console.error('Error response:', error);\n    console.error('Error details:', JSON.stringify(error.error));\n    this.showMessage(error.error?.message || 'An unknown error occurred!', 'error');\n  }\n\n\n    showMessage(msg: string, type: 'success' | 'error' = 'success') {\n      Swal.fire({\n        icon: type,\n        title: msg,\n        toast: true,\n        position: 'top',\n        showConfirmButton: false,\n        timer: 3000,\n        customClass: { container: 'toast' },\n      });\n    }\n\n  deleteSection(sectionId: number) {\n    this.templateService.deleteSection(this.template.id.toString(), sectionId.toString())\n      .subscribe(() => {\n        this.template.sections = this.template.sections?.filter(s => s.id !== sectionId);\n      });\n  }\n\n  // Field methods\n  editField(section: Section, field?: Field) {\n    this.selectedSection = section;\n    this.fieldParams.reset({ id: 0 });\n    if (field) {\n      this.fieldParams.patchValue(field);\n    }\n    this.addFieldModal.open();\n  }\n\n  saveField() {\n    if (this.fieldParams.invalid || !this.selectedSection) return;\n\n    const field: Field = this.fieldParams.value;\n    const sectionId = this.selectedSection.id;\n\n    if (field.id) {\n      this.templateService.updateField(this.template.id.toString(), sectionId.toString(), field.id.toString(), field)\n        .subscribe(updated => this.updateFieldInList(updated));\n    } else {\n      this.templateService.addField(this.template.id.toString(), sectionId.toString(), field)\n        .subscribe(newField => this.selectedSection?.fields?.push(newField));\n    }\n    this.addFieldModal.close();\n  }\n\n  deleteField(section: Section, fieldId: number) {\n    this.templateService.deleteField(this.template.id.toString(), section.id.toString(), fieldId.toString())\n      .subscribe(() => {\n        section.fields = section.fields?.filter(f => f.id !== fieldId);\n      });\n  }\n\n  private updateSectionInList(updated: Section) {\n    const index = this.template.sections?.findIndex(s => s.id === updated.id) ?? -1;\n    if (index > -1) this.template.sections![index] = updated;\n  }\n\n  private updateFieldInList(updated: Field) {\n    const index = this.selectedSection?.fields?.findIndex(f => f.id === updated.id) ?? -1;\n    if (index > -1) this.selectedSection!.fields![index] = updated;\n  }\n\n  toggleFields(section: Section) {\n    section.expanded = !section.expanded;\n    if (!section.fields) {\n      this.templateService.getSectionFields(this.template.id.toString(), section.id.toString())\n        .subscribe(fields => section.fields = fields);\n    }\n  }\n}","<!-- Sections Table Template -->\n<ng-template #sectionTemplate let-sections=\"sections\">\n    <div class=\"table-responsive\">\n      <table class=\"table-striped table-hover\">\n        <thead>\n          <tr>\n            <th>Section Title</th>\n            <th>Type</th>\n            <th class=\"!text-center\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let section of sections\">\n            <tr>\n              <td>{{ section.title }}</td>\n              <td>{{ section.type }}</td>\n              <td>\n                <div class=\"flex items-center justify-center gap-4\">\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" \n                    (click)=\"editSection(section)\">Edit</button>\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" \n                    (click)=\"deleteSection(section)\">Delete</button>\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" \n                    (click)=\"toggleFields(section)\">\n                    {{ section.expanded ? 'Hide Fields' : 'View Fields' }}\n                  </button>\n                </div>\n              </td>\n            </tr>\n            \n            <!-- Nested Fields Table -->\n            <tr *ngIf=\"section.expanded\">\n              <td colspan=\"3\">\n                <ng-container [ngTemplateOutlet]=\"fieldTemplate\" \n                  [ngTemplateOutletContext]=\"{ $implicit: section.fields }\">\n                </ng-container>\n              </td>\n            </tr>\n          </ng-container>\n          \n          <tr>\n            <td colspan=\"3\">\n              <button type=\"button\" class=\"btn btn-sm btn-outline-success\" \n                (click)=\"addSection()\">Add Section</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </ng-template>\n  \n  <!-- Fields Table Template -->\n  <ng-template #fieldTemplate let-fields=\"fields\">\n    <div class=\"table-responsive\">\n      <table class=\"table-striped table-hover\">\n        <thead>\n          <tr>\n            <th>Field Title</th>\n            <th>Type</th>\n            <th>Required</th>\n            <th class=\"!text-center\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let field of fields\">\n            <tr>\n              <td>{{ field.title }}</td>\n              <td>{{ field.type }}</td>\n              <td>{{ field.isRequired ? 'Yes' : 'No' }}</td>\n              <td>\n                <div class=\"flex items-center justify-center gap-4\">\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" \n                    (click)=\"editField(field)\">Edit</button>\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" \n                    (click)=\"deleteField(field)\">Delete</button>\n                </div>\n              </td>\n            </tr>\n          </ng-container>\n          \n          <tr>\n            <td colspan=\"4\">\n              <button type=\"button\" class=\"btn btn-sm btn-outline-success\" \n                (click)=\"addField()\">Add Field</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </ng-template>\n  \n  <!-- Usage in Main Template -->\n  <div class=\"panel mt-5 overflow-hidden border-0 p-0\">\n    <ng-container *ngIf=\"displayType === 'list'\">\n      <div class=\"table-responsive\">\n        <table class=\"table-striped table-hover\">\n          <!-- Main Template Table -->\n          <tbody>\n            <ng-container *ngFor=\"let template of filteredTemplateList\">\n              <tr>\n                <!-- ... template columns ... -->\n              </tr>\n              \n              <tr *ngIf=\"template.expanded\">\n                <td colspan=\"4\">\n                  <ng-container [ngTemplateOutlet]=\"sectionTemplate\" \n                    [ngTemplateOutletContext]=\"{ sections: template.sections }\">\n                  </ng-container>\n                </td>\n              </tr>\n            </ng-container>\n          </tbody>\n        </table>\n      </div>\n    </ng-container>\n  </div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}