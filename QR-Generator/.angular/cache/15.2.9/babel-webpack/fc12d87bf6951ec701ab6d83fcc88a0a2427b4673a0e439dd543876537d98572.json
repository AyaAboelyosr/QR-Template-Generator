{"ast":null,"code":"import { finalize } from 'rxjs/operators';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" Please enter your credentials. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_21_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"span\", 24);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_21_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"p\");\n    i0.ɵɵtext(2, \"Login Successful!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginComponent_div_21_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"p\");\n    i0.ɵɵtext(2, \"Login Failed. Please try again.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20);\n    i0.ɵɵtemplate(2, LoginComponent_div_21_div_2_Template, 2, 0, \"div\", 21);\n    i0.ɵɵtemplate(3, LoginComponent_div_21_div_3_Template, 3, 0, \"div\", 22);\n    i0.ɵɵtemplate(4, LoginComponent_div_21_div_4_Template, 3, 0, \"div\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isLoading && ctx_r2.loginSuccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isLoading && ctx_r2.loginError);\n  }\n}\nexport class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.email = '';\n    this.password = '';\n    this.showPassword = false;\n    this.showModal = false;\n    this.isLoading = false;\n    this.loginSuccess = false;\n    this.loginError = false;\n    this.showErrorSummary = false;\n  }\n  togglePasswordVisibility() {\n    this.showPassword = !this.showPassword;\n  }\n  showMessage(msg, type = 'success') {\n    Swal.fire({\n      icon: type,\n      title: msg,\n      toast: true,\n      position: 'top',\n      showConfirmButton: false,\n      timer: 3000,\n      customClass: {\n        container: 'toast'\n      }\n    });\n  }\n  onSubmit() {\n    if (!this.email || !this.password) {\n      this.showErrorSummary = true;\n      return;\n    }\n    this.showErrorSummary = false;\n    this.showModal = true;\n    this.isLoading = true;\n    this.loginSuccess = false;\n    this.loginError = false;\n    this.authService.login({\n      email: this.email,\n      password: this.password\n    }).pipe(finalize(() => {\n      this.isLoading = false;\n    })).subscribe({\n      next: () => {\n        this.loginSuccess = true;\n        setTimeout(() => {\n          this.showModal = false;\n          // Redirect based on role\n          const role = this.authService.getRole();\n          if (role === 'Admin') {\n            this.router.navigate(['/admin']);\n          } else if (role === 'Application User') {\n            this.router.navigate(['/QRCodeGenerator/qrgenerator']);\n          } else {\n            this.router.navigate(['/auth/login']); // Fallback if role is missing\n          }\n        }, 1000);\n      },\n      error: error => {\n        this.showMessage('Invalid user . Please Register First.', 'error');\n        this.loginError = true;\n        setTimeout(() => {\n          this.showModal = false;\n        }, 1000);\n      }\n    });\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 22,\n    vars: 5,\n    consts: [[1, \"form-container\"], [1, \"flex\", \"justify-center\", \"mb-6\"], [\"src\", \"https://sdq.sa/uploads/settings/logo-2024-10-16-10-54-20-6838.svg\", \"alt\", \"Logo\", 1, \"w-32\", \"h-auto\"], [1, \"space-y-5\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [\"type\", \"email\", \"placeholder\", \"Enter Email Address *\", \"name\", \"email\", \"required\", \"\", \"email\", \"\", 1, \"form-input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"relative\"], [\"placeholder\", \"Enter Password *\", \"name\", \"password\", \"required\", \"\", 1, \"form-input\", 3, \"type\", \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"absolute\", \"inset-y-0\", \"right-0\", \"pr-3\", \"flex\", \"items-center\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"opacity\", \"0.5\", \"d\", \"M3.27489 15.2957C2.42496 14.1915 2 13.6394 2 12C2 10.3606 2.42496 9.80853 3.27489 8.70433C4.97196 6.49956 7.81811 4 12 4C16.1819 4 19.028 6.49956 20.7251 8.70433C21.575 9.80853 22 10.3606 22 12C22 13.6394 21.575 14.1915 20.7251 15.2957C19.028 17.5004 16.1819 20 12 20C7.81811 20 4.97196 17.5004 3.27489 15.2957Z\", \"stroke\", \"currentColor\", \"stroke-width\", \"1.5\"], [\"d\", \"M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z\", \"stroke\", \"currentColor\", \"stroke-width\", \"1.5\"], [\"class\", \"text-red-500 text-sm\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"w-full\"], [1, \"text-center\", \"mt-4\"], [1, \"text-gray-600\"], [\"routerLink\", \"/auth/register\", 1, \"text-blue-600\", \"hover:text-blue-800\", \"hover:underline\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"text-red-500\", \"text-sm\"], [1, \"modal\"], [1, \"modal-content\"], [4, \"ngIf\"], [\"class\", \"text-green-500\", 4, \"ngIf\"], [\"class\", \"text-red-500\", 4, \"ngIf\"], [1, \"animate-spin\", \"border-4\", \"border-success\", \"border-l-transparent\", \"rounded-full\", \"w-10\", \"h-10\", \"inline-block\", \"align-middle\", \"m-auto\", \"mb-10\"], [1, \"text-green-500\"], [1, \"text-red-500\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"form\", 3, 4);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(5, \"div\")(6, \"input\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_9_listener() {\n          return ctx.togglePasswordVisibility();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(10, \"svg\", 9);\n        i0.ɵɵelement(11, \"path\", 10)(12, \"path\", 11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 2, 0, \"div\", 12);\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(14, \"button\", 13);\n        i0.ɵɵtext(15, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 14)(17, \"span\", 15);\n        i0.ɵɵtext(18, \"Don't have an account? \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"a\", 16);\n        i0.ɵɵtext(20, \"Register\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(21, LoginComponent_div_21_Template, 5, 3, \"div\", 17);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"type\", ctx.showPassword ? \"text\" : \"password\")(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.showErrorSummary);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n      }\n    },\n    dependencies: [i2.RouterLink, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.EmailValidator, i4.NgModel, i4.NgForm],\n    styles: [\".form-container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    height: 100vh;\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    max-width: 400px;\\r\\n    padding: 20px;\\r\\n    border: 1px solid #e2e8f0;\\r\\n    border-radius: 8px;\\r\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n.modal[_ngcontent-%COMP%] {\\r\\n    position: fixed;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background-color: rgba(0, 0, 0, 0.5);\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    z-index: 1000;\\r\\n}\\r\\n\\r\\n.modal-content[_ngcontent-%COMP%] {\\r\\n    background-color: white;\\r\\n    padding: 20px;\\r\\n    border-radius: 8px;\\r\\n    text-align: center;\\r\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n.animate-spin[_ngcontent-%COMP%] {\\r\\n    animation: _ngcontent-%COMP%_spin 1s linear infinite;\\r\\n}\\r\\n\\r\\n@keyframes _ngcontent-%COMP%_spin {\\r\\n    0% { transform: rotate(0deg); }\\r\\n    100% { transform: rotate(360deg); }\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsK0NBQStDO0FBQy9DO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0Qix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsZ0JBQWdCO0lBQ2hCLGFBQWE7SUFDYix5QkFBeUI7SUFDekIsa0JBQWtCO0lBQ2xCLHdDQUF3QztBQUM1Qzs7QUFFQTtJQUNJLGVBQWU7SUFDZixNQUFNO0lBQ04sT0FBTztJQUNQLFdBQVc7SUFDWCxZQUFZO0lBQ1osb0NBQW9DO0lBQ3BDLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLGFBQWE7QUFDakI7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixrQkFBa0I7SUFDbEIsd0NBQXdDO0FBQzVDOztBQUVBO0lBQ0ksa0NBQWtDO0FBQ3RDOztBQUVBO0lBQ0ksS0FBSyx1QkFBdUIsRUFBRTtJQUM5QixPQUFPLHlCQUF5QixFQUFFO0FBQ3RDIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBsb2dpbi5jb21wb25lbnQuY3NzIChzYW1lIGFzIHJlZ2lzdHJhdGlvbikgKi9cclxuLmZvcm0tY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgaGVpZ2h0OiAxMDB2aDtcclxufVxyXG5cclxuZm9ybSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1heC13aWR0aDogNDAwcHg7XHJcbiAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2UyZThmMDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbn1cclxuXHJcbi5tb2RhbCB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICB0b3A6IDA7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgei1pbmRleDogMTAwMDtcclxufVxyXG5cclxuLm1vZGFsLWNvbnRlbnQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG5cclxuLmFuaW1hdGUtc3BpbiB7XHJcbiAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNwaW4ge1xyXG4gICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxyXG4gICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cclxufSJdfQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aGVudGljYXRpb24vY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLCtDQUErQztBQUMvQztJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksV0FBVztJQUNYLGdCQUFnQjtJQUNoQixhQUFhO0lBQ2IseUJBQXlCO0lBQ3pCLGtCQUFrQjtJQUNsQix3Q0FBd0M7QUFDNUM7O0FBRUE7SUFDSSxlQUFlO0lBQ2YsTUFBTTtJQUNOLE9BQU87SUFDUCxXQUFXO0lBQ1gsWUFBWTtJQUNaLG9DQUFvQztJQUNwQyxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksdUJBQXVCO0lBQ3ZCLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsa0JBQWtCO0lBQ2xCLHdDQUF3QztBQUM1Qzs7QUFFQTtJQUNJLGtDQUFrQztBQUN0Qzs7QUFFQTtJQUNJLEtBQUssdUJBQXVCLEVBQUU7SUFDOUIsT0FBTyx5QkFBeUIsRUFBRTtBQUN0QztBQUNBLGdwRUFBZ3BFIiwic291cmNlc0NvbnRlbnQiOlsiLyogbG9naW4uY29tcG9uZW50LmNzcyAoc2FtZSBhcyByZWdpc3RyYXRpb24pICovXHJcbi5mb3JtLWNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGhlaWdodDogMTAwdmg7XHJcbn1cclxuXHJcbmZvcm0ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMmU4ZjA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDRweCA2cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG59XHJcblxyXG4ubW9kYWwge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHotaW5kZXg6IDEwMDA7XHJcbn1cclxuXHJcbi5tb2RhbC1jb250ZW50IHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbn1cclxuXHJcbi5hbmltYXRlLXNwaW4ge1xyXG4gICAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcclxufVxyXG5cclxuQGtleWZyYW1lcyBzcGluIHtcclxuICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cclxuICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"AAGA,SAASA,QAAQ,QAAQ,gBAAgB;AACzC,OAAOC,IAAI,MAAM,aAAa;;;;;;;;;ICoBtBC,oBAA2D;IAA3DA,+BAA2D;IACvDA,gDACJ;IAAAA,iBAAM;;;;;IAgBNA,2BAAuB;IACnBA,2BAA6I;IACjJA,iBAAM;;;;;IACNA,+BAA+D;IACxDA,iCAAiB;IAAAA,iBAAI;;;;;IAE5BA,+BAA2D;IACpDA,+CAA+B;IAAAA,iBAAI;;;;;IATlDA,+BAAqC;IAE7BA,uEAEM;IACNA,uEAEM;IACNA,uEAEM;IACVA,iBAAM;;;;IATIA,eAAe;IAAfA,uCAAe;IAGfA,eAAgC;IAAhCA,+DAAgC;IAGhCA,eAA8B;IAA9BA,6DAA8B;;;ADrC5C,OAAM,MAAOC,cAAc;EAUzBC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,gBAAW,GAAXD,WAAW;IAAuB,WAAM,GAANC,MAAM;IAT5D,UAAK,GAAW,EAAE;IAClB,aAAQ,GAAW,EAAE;IACrB,iBAAY,GAAY,KAAK;IAC7B,cAAS,GAAY,KAAK;IAC1B,cAAS,GAAY,KAAK;IAC1B,iBAAY,GAAY,KAAK;IAC7B,eAAU,GAAY,KAAK;IAC3B,qBAAgB,GAAY,KAAK;EAEsC;EAEvEC,wBAAwB;IACtB,IAAI,CAACC,YAAY,GAAG,CAAC,IAAI,CAACA,YAAY;EACxC;EAEAC,WAAW,CAACC,GAAW,EAAEC,OAA4B,SAAS;IAC5DV,IAAI,CAACW,IAAI,CAAC;MACRC,IAAI,EAAEF,IAAI;MACVG,KAAK,EAAEJ,GAAG;MACVK,KAAK,EAAE,IAAI;MACXC,QAAQ,EAAE,KAAK;MACfC,iBAAiB,EAAE,KAAK;MACxBC,KAAK,EAAE,IAAI;MACXC,WAAW,EAAE;QAAEC,SAAS,EAAE;MAAO;KAClC,CAAC;EACJ;EAGAC,QAAQ;IACN,IAAI,CAAC,IAAI,CAACC,KAAK,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE;MACjC,IAAI,CAACC,gBAAgB,GAAG,IAAI;MAC5B;;IAGF,IAAI,CAACA,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,UAAU,GAAG,KAAK;IAEvB,IAAI,CAACvB,WAAW,CAACwB,KAAK,CAAC;MAAEP,KAAK,EAAE,IAAI,CAACA,KAAK;MAAEC,QAAQ,EAAE,IAAI,CAACA;IAAQ,CAAE,CAAC,CAACO,IAAI,CACzE9B,QAAQ,CAAC,MAAK;MACZ,IAAI,CAAC0B,SAAS,GAAG,KAAK;IACxB,CAAC,CAAC,CACH,CAACK,SAAS,CAAC;MACVC,IAAI,EAAE,MAAK;QACT,IAAI,CAACL,YAAY,GAAG,IAAI;QAExBM,UAAU,CAAC,MAAK;UACd,IAAI,CAACR,SAAS,GAAG,KAAK;UAEtB;UACA,MAAMS,IAAI,GAAG,IAAI,CAAC7B,WAAW,CAAC8B,OAAO,EAAE;UACvC,IAAID,IAAI,KAAK,OAAO,EAAE;YACpB,IAAI,CAAC5B,MAAM,CAAC8B,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;WACjC,MAAM,IAAIF,IAAI,KAAK,kBAAkB,EAAE;YACtC,IAAI,CAAC5B,MAAM,CAAC8B,QAAQ,CAAC,CAAC,8BAA8B,CAAC,CAAC;WACvD,MAAM;YACL,IAAI,CAAC9B,MAAM,CAAC8B,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;QAE3C,CAAC,EAAE,IAAI,CAAC;MACV,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACf,IAAI,CAAC5B,WAAW,CAAC,uCAAuC,EAAE,OAAO,CAAC;QAClE,IAAI,CAACmB,UAAU,GAAG,IAAI;QAEtBK,UAAU,CAAC,MAAK;UACd,IAAI,CAACR,SAAS,GAAG,KAAK;QACxB,CAAC,EAAE,IAAI,CAAC;MACV;KACD,CAAC;EACJ;EAAC;qBAxEUtB,cAAc;EAAA;EAAA;UAAdA,cAAc;IAAAmC;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCX3BxC,8BAA4B;QAGpBA,yBAA8G;QAClHA,iBAAM;QAENA,kCAAoE;QAA5CA;UAAA,OAAYyC,cAAU;QAAA,EAAC;QAE3CzC,2BAAK;QAC0EA;UAAA;QAAA,EAAmB;QAA9FA,iBAA6H;QAIjIA,8BAAsB;QACmFA;UAAA;QAAA,EAAsB;QAA3HA,iBAAuJ;QACvJA,iCAAqH;QAArCA;UAAA,OAASyC,8BAA0B;QAAA,EAAC;QAChHzC,mBAA+F;QAA/FA,+BAA+F;QAC3FA,4BAAgY;QAEpYA,iBAAM;QAKdA,kEAEM;QAGNA,oBAAqD;QAArDA,mCAAqD;QAAAA,sBAAK;QAAAA,iBAAS;QAGnEA,gCAA8B;QACEA,wCAAuB;QAAAA,iBAAO;QAC1DA,8BAAyF;QAAAA,yBAAQ;QAAAA,iBAAI;QAMjHA,kEAYM;;;QA3CiFA,eAAmB;QAAnBA,mCAAmB;QAKvFA,eAA2C;QAA3CA,6DAA2C;QAUhDA,eAAsB;QAAtBA,2CAAsB;QAgB9BA,eAAe;QAAfA,oCAAe","names":["finalize","Swal","i0","LoginComponent","constructor","authService","router","togglePasswordVisibility","showPassword","showMessage","msg","type","fire","icon","title","toast","position","showConfirmButton","timer","customClass","container","onSubmit","email","password","showErrorSummary","showModal","isLoading","loginSuccess","loginError","login","pipe","subscribe","next","setTimeout","role","getRole","navigate","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\authentication\\components\\login\\login.component.ts","C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\authentication\\components\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { finalize } from 'rxjs/operators';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent {\r\n  email: string = '';\r\n  password: string = '';\r\n  showPassword: boolean = false;\r\n  showModal: boolean = false;\r\n  isLoading: boolean = false;\r\n  loginSuccess: boolean = false;\r\n  loginError: boolean = false;\r\n  showErrorSummary: boolean = false;\r\n\r\n  constructor(private authService: AuthService, private router: Router) {}\r\n\r\n  togglePasswordVisibility(): void {\r\n    this.showPassword = !this.showPassword;\r\n  }\r\n\r\n  showMessage(msg: string, type: 'success' | 'error' = 'success') {\r\n    Swal.fire({\r\n      icon: type,\r\n      title: msg,\r\n      toast: true,\r\n      position: 'top',\r\n      showConfirmButton: false,\r\n      timer: 3000,\r\n      customClass: { container: 'toast' },\r\n    });\r\n  }\r\n\r\n\r\n  onSubmit(): void {\r\n    if (!this.email || !this.password) {\r\n      this.showErrorSummary = true;\r\n      return;\r\n    }\r\n\r\n    this.showErrorSummary = false;\r\n    this.showModal = true;\r\n    this.isLoading = true;\r\n    this.loginSuccess = false;\r\n    this.loginError = false;\r\n\r\n    this.authService.login({ email: this.email, password: this.password }).pipe(\r\n      finalize(() => {\r\n        this.isLoading = false;\r\n      })\r\n    ).subscribe({\r\n      next: () => {\r\n        this.loginSuccess = true;\r\n        \r\n        setTimeout(() => {\r\n          this.showModal = false;\r\n\r\n          // Redirect based on role\r\n          const role = this.authService.getRole();\r\n          if (role === 'Admin') {\r\n            this.router.navigate(['/admin']);\r\n          } else if (role === 'Application User') {\r\n            this.router.navigate(['/QRCodeGenerator/qrgenerator']);\r\n          } else {\r\n            this.router.navigate(['/auth/login']); // Fallback if role is missing\r\n          }\r\n        }, 1000);\r\n      },\r\n      error: (error) => {\r\n        this.showMessage('Invalid user . Please Register First.', 'error');\r\n        this.loginError = true;\r\n\r\n        setTimeout(() => {\r\n          this.showModal = false;\r\n        }, 1000);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"form-container\">\r\n    <!-- Centered Logo -->\r\n    <div class=\"flex justify-center mb-6\">\r\n        <img src=\"https://sdq.sa/uploads/settings/logo-2024-10-16-10-54-20-6838.svg\" alt=\"Logo\" class=\"w-32 h-auto\" />\r\n    </div>\r\n\r\n    <form class=\"space-y-5\" (ngSubmit)=\"onSubmit()\" #loginForm=\"ngForm\">\r\n        <!-- Email Field -->\r\n        <div>\r\n            <input type=\"email\" placeholder=\"Enter Email Address *\" class=\"form-input\" [(ngModel)]=\"email\" name=\"email\" required email />\r\n        </div>\r\n\r\n        <!-- Password Field -->\r\n        <div class=\"relative\">\r\n            <input [type]=\"showPassword ? 'text' : 'password'\" placeholder=\"Enter Password *\" class=\"form-input\" [(ngModel)]=\"password\" name=\"password\" required />\r\n            <button type=\"button\" class=\"absolute inset-y-0 right-0 pr-3 flex items-center\" (click)=\"togglePasswordVisibility()\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path opacity=\"0.5\" d=\"M3.27489 15.2957C2.42496 14.1915 2 13.6394 2 12C2 10.3606 2.42496 9.80853 3.27489 8.70433C4.97196 6.49956 7.81811 4 12 4C16.1819 4 19.028 6.49956 20.7251 8.70433C21.575 9.80853 22 10.3606 22 12C22 13.6394 21.575 14.1915 20.7251 15.2957C19.028 17.5004 16.1819 20 12 20C7.81811 20 4.97196 17.5004 3.27489 15.2957Z\" stroke=\"currentColor\" stroke-width=\"1.5\"></path>\r\n                    <path d=\"M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z\" stroke=\"currentColor\" stroke-width=\"1.5\"></path>\r\n                </svg>\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Error Summary Message -->\r\n        <div *ngIf=\"showErrorSummary\" class=\"text-red-500 text-sm\">\r\n            Please enter your credentials.\r\n        </div>\r\n\r\n        <!-- Submit Button -->\r\n        <button type=\"submit\" class=\"btn btn-primary w-full\">Login</button>\r\n\r\n        <!-- Registration Link -->\r\n        <div class=\"text-center mt-4\">\r\n            <span class=\"text-gray-600\">Don't have an account? </span>\r\n            <a routerLink=\"/auth/register\" class=\"text-blue-600 hover:text-blue-800 hover:underline\">Register</a>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<!-- Modal (same as registration) -->\r\n<div *ngIf=\"showModal\" class=\"modal\">\r\n    <div class=\"modal-content\">\r\n        <div *ngIf=\"isLoading\">\r\n            <span class=\"animate-spin border-4 border-success border-l-transparent rounded-full w-10 h-10 inline-block align-middle m-auto mb-10\"></span>\r\n        </div>\r\n        <div *ngIf=\"!isLoading && loginSuccess\" class=\"text-green-500\">\r\n            <p>Login Successful!</p>\r\n        </div>\r\n        <div *ngIf=\"!isLoading && loginError\" class=\"text-red-500\">\r\n            <p>Login Failed. Please try again.</p>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}