{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/qrtemplategenerator/services/template.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = function (a0) {\n  return {\n    $implicit: a0\n  };\n};\nfunction TemplateDetailsComponent_ng_template_0_ng_container_11_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 8);\n    i0.ɵɵelementContainer(2, 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const section_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵnextContext(2);\n    const _r2 = i0.ɵɵreference(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c0, section_r7.fields));\n  }\n}\nfunction TemplateDetailsComponent_ng_template_0_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\")(7, \"div\", 10)(8, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_ng_container_11_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const section_r7 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.editSection(section_r7));\n    });\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_ng_container_11_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const section_r7 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.deleteSection(section_r7));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_ng_container_11_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const section_r7 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.toggleFields(section_r7));\n    });\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(14, TemplateDetailsComponent_ng_template_0_ng_container_11_tr_14_Template, 3, 4, \"tr\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const section_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(section_r7.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(section_r7.type);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", section_r7.expanded ? \"Hide Fields\" : \"View Fields\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r7.expanded);\n  }\n}\nfunction TemplateDetailsComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"table\", 5)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Section Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 6);\n    i0.ɵɵtext(9, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"tbody\");\n    i0.ɵɵtemplate(11, TemplateDetailsComponent_ng_template_0_ng_container_11_Template, 15, 4, \"ng-container\", 7);\n    i0.ɵɵelementStart(12, \"tr\")(13, \"td\", 8)(14, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.addSection());\n    });\n    i0.ɵɵtext(15, \"Add Section\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const sections_r5 = ctx.sections;\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", sections_r5);\n  }\n}\nfunction TemplateDetailsComponent_ng_template_2_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"div\", 10)(10, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_2_ng_container_13_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const field_r18 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.editField(field_r18));\n    });\n    i0.ɵɵtext(11, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_2_ng_container_13_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const field_r18 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.deleteField(field_r18));\n    });\n    i0.ɵɵtext(13, \"Delete\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const field_r18 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(field_r18.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r18.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r18.isRequired ? \"Yes\" : \"No\");\n  }\n}\nfunction TemplateDetailsComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"table\", 5)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Field Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 6);\n    i0.ɵɵtext(11, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, TemplateDetailsComponent_ng_template_2_ng_container_13_Template, 14, 3, \"ng-container\", 7);\n    i0.ɵɵelementStart(14, \"tr\")(15, \"td\", 15)(16, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function TemplateDetailsComponent_ng_template_2_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.addField());\n    });\n    i0.ɵɵtext(17, \"Add Field\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const fields_r16 = ctx.fields;\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", fields_r16);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    sections: a0\n  };\n};\nfunction TemplateDetailsComponent_ng_container_5_ng_container_4_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 15);\n    i0.ɵɵelementContainer(2, 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const template_r25 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵnextContext(2);\n    const _r0 = i0.ɵɵreference(1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r0)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c1, template_r25.sections));\n  }\n}\nfunction TemplateDetailsComponent_ng_container_5_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"tr\");\n    i0.ɵɵtemplate(2, TemplateDetailsComponent_ng_container_5_ng_container_4_tr_2_Template, 3, 4, \"tr\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const template_r25 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", template_r25.expanded);\n  }\n}\nfunction TemplateDetailsComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"table\", 5)(3, \"tbody\");\n    i0.ɵɵtemplate(4, TemplateDetailsComponent_ng_container_5_ng_container_4_Template, 3, 1, \"ng-container\", 7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.filteredTemplateList);\n  }\n}\nexport class TemplateDetailsComponent {\n  constructor(route, templateService) {\n    this.route = route;\n    this.templateService = templateService;\n    this.selectedSectionId = null;\n    this.selectedTemplateId = null;\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    if (id) {\n      this.loadTemplateDetails(+id);\n    }\n  }\n  loadTemplateDetails(id) {\n    this.templateService.getTemplateById(id.toString()).subscribe({\n      next: template => {\n        this.template = template;\n        this.template.sections?.forEach(s => {\n          s.expanded = false;\n          if (s.fields) {\n            s.fields.forEach(f => f.expanded = false);\n          }\n        });\n      },\n      error: err => Swal.fire('Error', 'Failed to load template details', 'error')\n    });\n  }\n  toggleSection(section) {\n    if (!section.fields) {\n      this.templateService.getSectionFields(this.template.id.toString(), section.id.toString()).subscribe(fields => {\n        section.fields = fields;\n        section.expanded = !section.expanded;\n      });\n    } else {\n      section.expanded = !section.expanded;\n    }\n  }\n  toggleField(field) {\n    field.expanded = !field.expanded;\n  }\n  static #_ = this.ɵfac = function TemplateDetailsComponent_Factory(t) {\n    return new (t || TemplateDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TemplateService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TemplateDetailsComponent,\n    selectors: [[\"app-template-details\"]],\n    decls: 6,\n    vars: 1,\n    consts: [[\"sectionTemplate\", \"\"], [\"fieldTemplate\", \"\"], [1, \"panel\", \"mt-5\", \"overflow-hidden\", \"border-0\", \"p-0\"], [4, \"ngIf\"], [1, \"table-responsive\"], [1, \"table-striped\", \"table-hover\"], [1, \"!text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"3\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-success\", 3, \"click\"], [1, \"flex\", \"items-center\", \"justify-center\", \"gap-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", 3, \"click\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"colspan\", \"4\"]],\n    template: function TemplateDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TemplateDetailsComponent_ng_template_0_Template, 16, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(2, TemplateDetailsComponent_ng_template_2_Template, 18, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵtemplate(5, TemplateDetailsComponent_ng_container_5_Template, 5, 1, \"ng-container\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.displayType === \"list\");\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0ZW1wbGF0ZS1kZXRhaWxzLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcXJ0ZW1wbGF0ZWdlbmVyYXRvci9jb21wb25lbnRzL3RlbXBsYXRlLWRldGFpbHMvdGVtcGxhdGUtZGV0YWlscy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxnTEFBZ0wiLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["Swal","i0","TemplateDetailsComponent","constructor","route","templateService","ngOnInit","id","snapshot","paramMap","get","loadTemplateDetails","getTemplateById","toString","subscribe","next","template","sections","forEach","s","expanded","fields","f","error","err","fire","toggleSection","section","getSectionFields","toggleField","field","selectors","decls","vars","consts"],"sourceRoot":"","sources":["C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\qrtemplategenerator\\components\\template-details\\template-details.component.ts","C:\\Users\\Electronica Care\\Downloads\\QRCodeGenerator-main\\QR-Generator\\src\\app\\qrtemplategenerator\\components\\template-details\\template-details.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { TemplateService } from 'src/app/qrtemplategenerator/services/template.service';\nimport { Template } from 'src/app/qrtemplategenerator/Models/Template';\nimport Swal from 'sweetalert2';\nimport { Section } from '../../Models/Section';\nimport { Field } from '../../Models/Field';\n\n@Component({\n  selector: 'app-template-details',\n  templateUrl: './template-details.component.html',\n  styleUrls: ['./template-details.component.css']\n})\nexport class TemplateDetailsComponent implements OnInit {\n  template!: Template;\n  selectedSectionId: number | null = null;\n  selectedTemplateId: number | null = null;\n\n  constructor(\n    private route: ActivatedRoute,\n    private templateService: TemplateService\n  ) { }\n\n  ngOnInit(): void {\n    const id = this.route.snapshot.paramMap.get('id');\n    if (id) {\n      this.loadTemplateDetails(+id);\n    }\n  }\n\n  loadTemplateDetails(id: number) {\n    this.templateService.getTemplateById(id.toString()).subscribe({\n      next: (template) => {\n        this.template = template;\n        this.template.sections?.forEach(s => {\n          s.expanded = false;\n          if (s.fields) {\n            s.fields.forEach(f => f.expanded = false);\n          }\n        });\n      },\n      error: (err) => Swal.fire('Error', 'Failed to load template details', 'error')\n    });\n  }\n\n  toggleSection(section: Section) {\n    if (!section.fields) {\n      this.templateService.getSectionFields(\n        this.template.id.toString(),\n        section.id.toString()\n      ).subscribe(fields => {\n        section.fields = fields;\n        section.expanded = !section.expanded;\n      });\n    } else {\n      section.expanded = !section.expanded;\n    }\n  }\n\n  toggleField(field: Field) {\n    field.expanded = !field.expanded;\n  }\n}","<!-- Sections Table Template -->\n<ng-template #sectionTemplate let-sections=\"sections\">\n    <div class=\"table-responsive\">\n      <table class=\"table-striped table-hover\">\n        <thead>\n          <tr>\n            <th>Section Title</th>\n            <th>Type</th>\n            <th class=\"!text-center\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let section of sections\">\n            <tr>\n              <td>{{ section.title }}</td>\n              <td>{{ section.type }}</td>\n              <td>\n                <div class=\"flex items-center justify-center gap-4\">\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" \n                    (click)=\"editSection(section)\">Edit</button>\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" \n                    (click)=\"deleteSection(section)\">Delete</button>\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" \n                    (click)=\"toggleFields(section)\">\n                    {{ section.expanded ? 'Hide Fields' : 'View Fields' }}\n                  </button>\n                </div>\n              </td>\n            </tr>\n            \n            <!-- Nested Fields Table -->\n            <tr *ngIf=\"section.expanded\">\n              <td colspan=\"3\">\n                <ng-container [ngTemplateOutlet]=\"fieldTemplate\" \n                  [ngTemplateOutletContext]=\"{ $implicit: section.fields }\">\n                </ng-container>\n              </td>\n            </tr>\n          </ng-container>\n          \n          <tr>\n            <td colspan=\"3\">\n              <button type=\"button\" class=\"btn btn-sm btn-outline-success\" \n                (click)=\"addSection()\">Add Section</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </ng-template>\n  \n  <!-- Fields Table Template -->\n  <ng-template #fieldTemplate let-fields=\"fields\">\n    <div class=\"table-responsive\">\n      <table class=\"table-striped table-hover\">\n        <thead>\n          <tr>\n            <th>Field Title</th>\n            <th>Type</th>\n            <th>Required</th>\n            <th class=\"!text-center\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let field of fields\">\n            <tr>\n              <td>{{ field.title }}</td>\n              <td>{{ field.type }}</td>\n              <td>{{ field.isRequired ? 'Yes' : 'No' }}</td>\n              <td>\n                <div class=\"flex items-center justify-center gap-4\">\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" \n                    (click)=\"editField(field)\">Edit</button>\n                  <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" \n                    (click)=\"deleteField(field)\">Delete</button>\n                </div>\n              </td>\n            </tr>\n          </ng-container>\n          \n          <tr>\n            <td colspan=\"4\">\n              <button type=\"button\" class=\"btn btn-sm btn-outline-success\" \n                (click)=\"addField()\">Add Field</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </ng-template>\n  \n  <!-- Usage in Main Template -->\n  <div class=\"panel mt-5 overflow-hidden border-0 p-0\">\n    <ng-container *ngIf=\"displayType === 'list'\">\n      <div class=\"table-responsive\">\n        <table class=\"table-striped table-hover\">\n          <!-- Main Template Table -->\n          <tbody>\n            <ng-container *ngFor=\"let template of filteredTemplateList\">\n              <tr>\n                <!-- ... template columns ... -->\n              </tr>\n              \n              <tr *ngIf=\"template.expanded\">\n                <td colspan=\"4\">\n                  <ng-container [ngTemplateOutlet]=\"sectionTemplate\" \n                    [ngTemplateOutletContext]=\"{ sections: template.sections }\">\n                  </ng-container>\n                </td>\n              </tr>\n            </ng-container>\n          </tbody>\n        </table>\n      </div>\n    </ng-container>\n  </div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}